function v(c,e){return c<<e|c>>32-e&4294967295}function w(c,e){var d=53421250;c+=2997784595;e+=752410698;d^=e;d-=v(e,14);c^=d;c-=v(d,11);e^=c;e-=v(c,25);d^=e;d-=v(e,16);c^=d;c-=v(d,4);e^=c;e-=v(c,14);d^=e;d-=v(e,24);return d&65535}function x(c,e,d,f,h,i,g){c[e+d*33]=f+(0|h*(w(e+i,d+g)-32768)/25600)}function y(c,e,d){c[e+d*33]=Math.max(0,7*Math.min(65535,c[e+d*33])/65536)}
function z(c,e,d,f,h,i){if(!(f<=1)){var g=f>>1,k=c[e+d*33],l=c[e+f+d*33],q=c[e+(d+f)*33],o=c[e+f+(d+f)*33];x(c,e+g,d,k+l>>1,f<<8,h,i);x(c,e+g,d+f,q+o>>1,f<<8,h,i);x(c,e,d+g,k+q>>1,f<<8,h,i);x(c,e+f,d+g,l+o>>1,f<<8,h,i);x(c,e+g,d+g,k+l+q+o>>2,362*f,h,i);z(c,e,d,g,h,i);z(c,e+g,d,g,h,i);z(c,e,d+g,g,h,i);z(c,e+g,d+g,g,h,i);y(c,e+g,d);y(c,e+g,d+f);y(c,e,d+g);y(c,e+f,d+g);y(c,e+g,d+g)}}var A={};
function B(c,e){A[e]||(A[e]={});if(A[e][c])return A[e][c];var d=A[e],f=c<<5,h=e<<5,i=[];i[0]=w(f,h);i[32]=w(f+32,h);i[1056]=w(f,32+h);i[1088]=w(f+32,h+32);z(i,0,0,32,f,h);y(i,0,0);y(i,0,32);y(i,32,0);y(i,32,32);d[c]=i;return A[e][c]};var C=[0,0,1,1,1,0,-1,-1,-1],G=[0,-1,-1,0,1,1,1,0,-1],H=[0,0,0,1,2,2,2,3,0],I=[[],[1,1,12],[-1,1,-4],[0,1,12],[1,-1,-4],[1,0,12],[-1,1,-4,1,-1,-4],[1,1,28],[-1,-1,-20],[1,1,12,-1,-1,-20],[-1,0,-4],[-1,1,12],[0,-1,-4],[1,-1,12],[-1,-1,-4],[]],J=0;function K(){return((new Date).getTime()>>5)+J}function L(c,e,d,f,h,i,g){this.n=0;this.m=c;this.h=e;this.x=d;this.y=f;this.c=g;this.o=h;this.p=i;this.f=B(d>>9,f>>9);this.l=2;this.k=5;this.i=48*h;this.j=72*i;this.g=2;this.d=0}
function M(c,e,d){e.style.backgroundPosition=-(c.i+[1,2,1,0][c.d/6|0]*16)+"px "+-(c.j+c.g*18)+"px";var f=c.y&511,h=(c.x>>9&1)+(c.y>>9&1)*2;e.style.left=(c.x&511)-8+"px";e.style.top=f-12+"px";e.style.zIndex=10+f;if(c.e!=h){c.e&&d[c.e].removeChild(e);d[h].appendChild(e);c.e=h}}function N(c,e,d,f,h){var i=h,g=h;if(d>0)i=(16-c)/d;if(d<0)i=(-1-c)/d;if(f>0)g=(16-e)/f;if(f<0)g=(-1-e)/f;return Math.min(i,g,h)}
L.prototype.update=function(c){if(this.c!=0){var e=C[this.c]*3,d=G[this.c]*3,f=c-this.h;this.d+=f;this.d%=24;for(var h=this.l,i=this.k,g=this.f,k=this.x,l=this.y,q=k>>9,o=l>>9;f>0;){var j=k>>4&31,n=l>>4&31,m=f;j=I[(g[j+n*33]<h||g[j+n*33]>i?1:0)|(g[j+n*33+1]<h||g[j+n*33+1]>i?2:0)|(g[j+n*33+33]<h||g[j+n*33+33]>i?4:0)|(g[j+n*33+34]<h||g[j+n*33+34]>i?8:0)];n=0;for(var u=k&15,r=l&15,p=0;p<j.length;p+=3){var D=j[p],E=j[p+1];m=j[p+2];var s=e*D+d*E;if(s<0){s=(m-D*u-E*r)/s;if(s>f)s=f;k+=e*s|0;l+=d*s|0;u+=
e*s|0;r+=d*s|0;f-=s;n=1;var F=-E*e+D*d;m=N(u,r,-E*F,D*F,f);k+=-E*F*m|0;l+=D*F*m|0;f-=m;if(s<0){f=0;n=1;break}}}if(!n){m=N(u,r,e,d,f);k+=e*m|0;l+=d*m|0;f-=m}m=k>>9;j=l>>9;if(m!=q||j!=o){g=this.f=B(m,j);q=m;o=j}}this.x=k;this.y=l}this.h=c};function O(c,e,d){c.update(e);c.c=d;if(d==0)c.d=0;else c.g=H[d]};function P(c,e,d){var f=document.createElement("div");f.style.position="absolute";f.style.background='url("'+c+'") 0 0 no-repeat';f.style.width=e+"px";f.style.height=d+"px";return f}var Q=[[],[],[],[]],R=[],S=[],T=[];
function U(c,e){for(var d=c-256>>9,f=e-256>>9,h=c-256&511,i=e-256&511,g=0;g<2;g++)for(var k=0;k<2;k++){var l=d+k&1|(f+g&1)<<1;if(R[l]!=d+k||S[l]!=f+g){var q=Q[l],o=d+k,j=f+g,n=B(o,j),m=void 0,u=void 0,r=void 0;o<<=5;j<<=5;for(r=0;r<32;r++){u=0;for(m=r*33;u<32;u++,m++){var p=n[m]|0;p=p*15*V+W[(n[m+1]|0)-p+1+((n[m+33]|0)-p+1)*3+((n[m+34]|0)-p+1)*9]+(w(o+u,j+r)&V-1);q[0].drawImage(X,16*(p&15),16*(p>>4),16,16,u*16,r*16,16,16)}}R[l]=d+k;S[l]=f+g}T[l].style.left=-h+512*k+"px";T[l].style.top=-i+512*g+"px"}}
window.a=function(){var c=document.getElementById("map");Y();for(var e=0;e<4;e++){T[e]=Z(Q[e]);c.appendChild(T[e])}var d=new L(1,K(),256,256,1,0,0),f=P("chars.png",16,18);M(d,f,T);var h=[],i={37:"L",38:"U",39:"R",40:"D",87:"U",65:"L",83:"D",68:"R"},g=d.x+8,k=d.y+12;U(g,k);var l=0,q=0;setInterval(function(){d.update(K());M(d,f,T);var j=0.03125*(d.y+G[d.c]*128+12-k)+-0.4375*q;l+=0.03125*(d.x+C[d.c]*128+8-g)+-0.4375*l;q+=j;g+=l;k+=q;U(g,k);document.getElementById("status").innerHTML="("+d.x+","+d.y+
")"},32);function o(){var j=K();if(h.U)if(h.L)O(d,j,8);else h.R?O(d,j,2):O(d,j,1);else if(h.D)if(h.L)O(d,j,6);else h.R?O(d,j,4):O(d,j,5);else if(h.L)O(d,j,7);else h.R?O(d,j,3):O(d,j,0)}window.onkeydown=function(j){if(j.keyCode)if(i[j.keyCode]){h[i[j.keyCode]]=1;o()}};window.onkeyup=function(j){if(j.keyCode)if(i[j.keyCode]){h[i[j.keyCode]]=0;o()}}};window.b=function(){};window.t=function(){var c=document.getElementById("about");c.style.visibility=c.style.visibility=="hidden"?"visible":"hidden"};var V=4,W=[];function Y(){var c;for(c=0;c<27;c++){var e=0,d=c%3-1,f=(c/3|0)%3-1,h=(c/9|0)-1,i=0;if(d==-1||f==-1||h==-1){i=-15;e=1;d++;f++;h++}W[c]=V*(i+e+d*2+f*4+h*8)}}var X=document.createElement("img");X.src="t.gif";function Z(c){var e=document.createElement("canvas");e.width=512;e.height=512;c[0]=e.getContext("2d");c=document.createElement("div");c.appendChild(e);c.style.width="512px";c.style.height="512px";c.style.position="absolute";return c};
