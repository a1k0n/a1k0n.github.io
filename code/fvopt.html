<title>farmville optimizer</title>
<table border=0>
  <tr><td>starting coins: </td><td><input type=number value="5000" id=m0></td>
    <td>level: </td><td><input type=number value="1" id=level></td></tr>
  <tr><td>max plots: </td><td><input type=number value="144" id=maxplots></td></tr>
  <tr><td>time (days): </td><td><input type=number value="2" id=days></td>
    <td>hours played per day: </td><td><input type=number value="15" id=hpd></td></tr>
  <tr><td>subjective value of xp: </td><td><input type=number value="100" id=xpval></td>
    <td>subjective cost of clicking: </td><td><input type=number value="1" id=ccost></td></tr>
</table>
<button onClick="compute();">compute!</button><br>
<textarea cols=70 rows=30 id=log></textarea>
<script>compute=(function(){var j={Strawberries:[35,10,4,1,1],Eggplant:[88,25,46,2,1],Wheat:[115,35,69,2,1],Soybeans:[63,15,23,2,1],Squash:[121,40,46,2,4],Pumpkin:[68,30,8,1,5],Artichokes:[204,70,92,2,6],Rice:[96,45,12,1,7],Raspberries:[46,20,2,0,8],Cotton:[207,75,69,2,9],BellPeppers:[198,90,46,2,11],Peppers:[162,70,23,2,12],AloeVera:[85,50,6,1,14],Pineapples:[242,95,46,2,15],Blueberries:[91,50,4,1,17],Watermelons:[348,130,92,2,18],Grapes:[270,85,23,2,19],Tomatoes:[173,100,8,1,20],Potatoes:[345,135,69,2,21],Carrots:[200,110,12,1,22],Coffee:[243,120,16,1,23],Corn:[380,150,69,2,24],Sunflowers:[315,135,23,2,25],Cabbage:[388,140,46,2,27],Blackberries:[117,75,4,1,29],RedWheat:[449,180,69,2,30],SugarCane:[243,165,8,1,31],Peas:[381,190,23,3,32],YellowMelon:[528,205,92,2,33],Onion:[268,170,12,1,34],Broccoli:[473,200,46,4,35]};var n,p,l,b,f,o,c,m,i=document.getElementById("log");function a(g){i.value+=g}function d(q,g){var r=(q[1]+15);return Math.min(o,Math.floor(g/r))}function e(q,g){var s=(q[1]+15),r=d(q,g);return(g-s*r)+r*q[0]}function k(q,g){var r=d(q,g);return r*(q[3]+1)}function h(I,B,C,u){var G=I+","+B;if(n[G]!=undefined){return n[G]}if(I<=0){return B+C*c-u*m}var r=I%24,t,w,z=0;for(var y in j){var s=j[y],F=s[4];if(F>b){continue}var E=d(s,B),g=e(s,B),A=k(s,B),H=j[y][2];if(H>I){continue}var q=(I-H)%24;if(q<(24-f)){if(q>=H){continue}H+=q}if(H>I){continue}var D=h(I-H,g,C+A,u+3*E);if(t===undefined||D>t){t=D;w=y;z=H}}n[G]=t;p[G]=w;l[G]=z;return t}return function(){var J=0|document.getElementById("m0").value,G=0|document.getElementById("days").value;o=0|document.getElementById("maxplots").value;f=0|document.getElementById("hpd").value;c=0|document.getElementById("xpval").value;m=0|document.getElementById("ccost").value;b=0|document.getElementById("level").value;i.value="";a("calculating; m0="+J+" days="+G+" hpd="+f+"\n");n={};p={};l={};var I=24*G,C,y=0,g=J,H=0,E=h(I,J,0,0);while(I>0){var u=I+","+g,F=n[u],A=p[u],D=l[u];if(A=="nothing"){break}var z=j[A],s=24*G-I,q=d(z,g);a("@"+(0|(s/24))+"d "+(s%24)+"h: coins="+g+" xp="+y+" -> plant "+q+" x "+A);var r=g,B=y;y+=k(z,g);H+=3*q;g=e(z,g);a(" (+"+(g-r)+"c "+(y-B)+"xp)\n");I-=D}a("final coins="+g+" (gain of "+(g-J)+", "+y+" xp) clicks="+H+"\n");a("value="+E+"\n");a("money/day = "+((g-J)/G)+"\t");a("xp/day = "+(y/G)+"\n");a("money/click = "+((g-J)/H)+"\t");a("xp/click = "+(y/H)+"\n")}})();</script>
